<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>图片转base64</title>
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
	</head>

	<body>

		<img src="img/add.png" alt="" id="imgs" />
<script type="text/javascript">
	/*三种函数自调用
	1.!function(){}()//!function()
	2.(function(){})()//(function)()
	3.(function(){}())//(function())*/
	!function(){//网络图片，站内图片都可以
		var url = "http://p1.pstatp.com/large/435d000085555bd8de10"; 
		convertImgToBase64(url, function(base64Img) {
			//转化后的base64
			console.log(base64Img);
			$("#imgs").attr("src",base64Img);
		});
	}();
	//实现将项目的图片转化成base64
	function convertImgToBase64(url, callback, outputFormat) {
		var canvas = document.createElement('CANVAS'),
		ctx = canvas.getContext('2d'),
		img = new Image;　　
		img.crossOrigin = 'Anonymous';　　
		img.onload = function() {　　
			canvas.height = img.height;　　
			canvas.width = img.width;　　
			ctx.drawImage(img, 0, 0);　　
			var dataURL = canvas.toDataURL(outputFormat || 'image/png');　　
			callback.call(this, dataURL);　　
			canvas = null;
		};　　
		img.src = url;
	}
</script>
	</body>

</html>